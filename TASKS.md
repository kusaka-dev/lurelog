# ルアーログ 開発タスク一覧

## 🎯 現在の状態
- ✅ Prismaスキーマ作成完了
- ✅ 環境変数ファイル作成完了
- ✅ 全ページファイル作成完了（8ページ）
- ✅ サイドメニュー作成完了

## 📋 今後のタスク

### 1. 環境セットアップ・データベース
- [ ] PostgreSQLのインストール・セットアップ
- [ ] `.env`ファイルにデータベース接続情報を設定
- [ ] `npx prisma migrate dev --name init` でマイグレーション実行
- [ ] `npx prisma generate` でPrismaクライアント生成
- [ ] シードデータの作成（初期ブランド・カテゴリデータ）

### 2. Prismaクライアントのセットアップ
- [ ] `src/lib/prisma.ts` を作成（Prismaクライアントのシングルトン）
- [ ] 開発環境での接続プーリング設定

### 3. API Routes実装（バックエンド）

#### 3.1 ブランドAPI
- [ ] `GET /api/brands` - ブランド一覧取得
- [ ] `POST /api/brands` - ブランド新規作成
- [ ] `GET /api/brands/[id]` - ブランド詳細取得
- [ ] `PUT /api/brands/[id]` - ブランド更新
- [ ] `DELETE /api/brands/[id]` - ブランド削除

#### 3.2 カテゴリAPI
- [ ] `GET /api/categories` - カテゴリ一覧取得
- [ ] `POST /api/categories` - カテゴリ新規作成
- [ ] `GET /api/categories/[id]` - カテゴリ詳細取得
- [ ] `PUT /api/categories/[id]` - カテゴリ更新
- [ ] `DELETE /api/categories/[id]` - カテゴリ削除

#### 3.3 ルアーAPI
- [ ] `GET /api/lures` - ルアー一覧取得（検索・フィルタ・ページネーション対応）
- [ ] `POST /api/lures` - ルアー新規作成
- [ ] `GET /api/lures/[id]` - ルアー詳細取得
- [ ] `PUT /api/lures/[id]` - ルアー更新
- [ ] `DELETE /api/lures/[id]` - ルアー削除

#### 3.4 釣果記録API
- [ ] `GET /api/catches` - 釣果記録一覧取得
- [ ] `POST /api/catches` - 釣果記録新規作成
- [ ] `GET /api/catches/[id]` - 釣果記録詳細取得
- [ ] `PUT /api/catches/[id]` - 釣果記録更新
- [ ] `DELETE /api/catches/[id]` - 釣果記録削除
- [ ] `GET /api/lures/[id]/catches` - 特定ルアーの釣果一覧取得

#### 3.5 ダッシュボードAPI
- [ ] `GET /api/dashboard/stats` - 統計情報取得

### 4. フロントエンド実装

#### 4.1 型定義
- [ ] `src/types/index.ts` を作成（TypeScript型定義）
- [ ] Prismaの型とフロントエンドの型の整合性確認

#### 4.2 ダッシュボード
- [ ] APIから統計データ取得
- [ ] カード表示の実装
- [ ] 最近のルアー・釣果記録の表示
- [ ] チャートライブラリの導入（recharts等）
- [ ] ブランド別・カテゴリ別の円グラフ実装

#### 4.3 ルアー一覧ページ
- [ ] APIからルアー一覧データ取得
- [ ] グリッド表示の実装
- [ ] 検索機能の実装
- [ ] フィルタ機能（ブランド・カテゴリ）の実装
- [ ] ページネーション実装
- [ ] ソート機能の実装

#### 4.4 ルアー詳細ページ
- [ ] APIからルアー詳細データ取得
- [ ] 画像表示の実装
- [ ] 削除機能の実装（確認ダイアログ付き）
- [ ] 紐づく釣果記録の表示

#### 4.5 ルアー登録・編集ページ
- [ ] React Hook Formのセットアップ
- [ ] Zodバリデーションスキーマの作成
- [ ] フォーム送信処理の実装
- [ ] ブランド・カテゴリのセレクトボックスにデータ表示
- [ ] 画像アップロード機能の実装（Vercel Blob使用）
- [ ] エラーハンドリングとバリデーションメッセージ表示

#### 4.6 釣果記録ページ
- [ ] APIから釣果記録一覧取得
- [ ] テーブル表示の実装
- [ ] 新規登録モーダル/ページの実装
- [ ] ルアー選択機能（セレクトボックス）
- [ ] 編集・削除機能の実装
- [ ] 検索・フィルタ機能

#### 4.7 ブランド管理ページ
- [ ] APIからブランド一覧取得
- [ ] テーブル表示の実装
- [ ] 新規登録モーダルの実装
- [ ] 編集・削除機能の実装
- [ ] 各ブランドのルアー数表示

#### 4.8 カテゴリ管理ページ
- [ ] APIからカテゴリ一覧取得
- [ ] テーブル表示の実装
- [ ] 新規登録モーダルの実装
- [ ] 編集・削除機能の実装
- [ ] 各カテゴリのルアー数表示

### 5. shadcn/ui コンポーネント導入・置き換え

#### 5.1 shadcn/uiコンポーネントのインストール
- [ ] `npx shadcn@latest add card` - カード
- [ ] `npx shadcn@latest add button` - ボタン（すでにあるが確認）
- [ ] `npx shadcn@latest add input` - 入力フィールド
- [ ] `npx shadcn@latest add select` - セレクトボックス
- [ ] `npx shadcn@latest add textarea` - テキストエリア
- [ ] `npx shadcn@latest add table` - テーブル
- [ ] `npx shadcn@latest add dialog` - ダイアログ/モーダル
- [ ] `npx shadcn@latest add form` - フォーム
- [ ] `npx shadcn@latest add badge` - バッジ
- [ ] `npx shadcn@latest add label` - ラベル
- [ ] `npx shadcn@latest add alert-dialog` - 確認ダイアログ
- [ ] `npx shadcn@latest add toast` - トースト通知
- [ ] `npx shadcn@latest add skeleton` - ローディングスケルトン
- [ ] `npx shadcn@latest add sheet` - サイドシート（モバイルメニュー用）

#### 5.2 ダッシュボードページの置き換え
- [ ] 統計カードを`Card`コンポーネントに置き換え
- [ ] グリッドレイアウトを調整
- [ ] `Skeleton`でローディング状態を追加

#### 5.3 ルアー一覧ページの置き換え
- [ ] 検索入力を`Input`コンポーネントに置き換え
- [ ] フィルタのセレクトボックスを`Select`コンポーネントに置き換え
- [ ] 新規登録ボタンを`Button`コンポーネントに置き換え
- [ ] ルアーカードを`Card`コンポーネントで作成
- [ ] ステータスバッジを`Badge`コンポーネントに置き換え

#### 5.4 ルアー詳細ページの置き換え
- [ ] 詳細情報カードを`Card`コンポーネントに置き換え
- [ ] ボタンを`Button`コンポーネントに置き換え
- [ ] 削除確認を`AlertDialog`コンポーネントで実装
- [ ] ステータスを`Badge`で表示

#### 5.5 ルアー登録・編集ページの置き換え
- [ ] フォーム全体を`Form`コンポーネントに置き換え
- [ ] 各入力フィールドを`Input`コンポーネントに置き換え
- [ ] セレクトボックスを`Select`コンポーネントに置き換え
- [ ] テキストエリアを`Textarea`コンポーネントに置き換え
- [ ] ラベルを`Label`コンポーネントに置き換え
- [ ] ボタンを`Button`コンポーネントに置き換え
- [ ] バリデーションエラー表示の実装

#### 5.6 釣果記録ページの置き換え
- [ ] テーブルを`Table`コンポーネントに置き換え
- [ ] 検索・フィルタを`Input`と`Select`に置き換え
- [ ] 新規登録を`Dialog`コンポーネントで実装
- [ ] ボタンを`Button`コンポーネントに置き換え

#### 5.7 ブランド管理ページの置き換え
- [ ] テーブルを`Table`コンポーネントに置き換え
- [ ] 検索を`Input`コンポーネントに置き換え
- [ ] 新規登録を`Dialog`コンポーネントで実装
- [ ] 編集フォームを`Dialog`で実装
- [ ] 削除確認を`AlertDialog`で実装

#### 5.8 カテゴリ管理ページの置き換え
- [ ] テーブルを`Table`コンポーネントに置き換え
- [ ] 検索を`Input`コンポーネントに置き換え
- [ ] 新規登録を`Dialog`コンポーネントで実装
- [ ] 編集フォームを`Dialog`で実装
- [ ] 削除確認を`AlertDialog`で実装

#### 5.9 サイドバーの置き換え
- [ ] モバイル用に`Sheet`コンポーネントを導入
- [ ] ハンバーガーメニューボタンを追加
- [ ] デスクトップとモバイルの切り替え実装

#### 5.10 共通コンポーネント作成
- [ ] 削除確認ダイアログコンポーネント（`DeleteConfirmDialog`）
- [ ] ローディングスケルトンコンポーネント（各ページ用）
- [ ] 空状態表示コンポーネント（`EmptyState`）
- [ ] トースト通知のセットアップ（`Toaster`）

### 6. 画像アップロード機能
- [ ] Vercel Blobのセットアップ
- [ ] 画像アップロードAPI作成
- [ ] 画像プレビュー機能の実装
- [ ] 画像削除機能の実装
- [ ] 画像最適化（Next.js Image使用）

### 7. エラーハンドリング・ローディング
- [ ] `loading.tsx` の作成（各ページ）
- [ ] `error.tsx` の作成（エラーバウンダリ）
- [ ] トースト通知の実装（成功・エラー）
- [ ] APIエラーハンドリングの統一

### 8. レスポンシブデザイン
- [ ] サイドバーのモバイル対応（ハンバーガーメニュー）
- [ ] テーブルのモバイル対応（カード表示に切り替え）
- [ ] フォームのモバイル最適化
- [ ] 画像表示のレスポンシブ対応

### 9. テスト（オプション）
- [ ] Jestのセットアップ
- [ ] コンポーネントのユニットテスト
- [ ] APIのインテグレーションテスト
- [ ] E2Eテスト（Playwright等）

### 10. デプロイ・本番環境
- [ ] Vercelアカウント作成
- [ ] Vercel Postgresのセットアップ
- [ ] 環境変数の本番設定
- [ ] データベースマイグレーション（本番）
- [ ] Vercelへのデプロイ
- [ ] ドメイン設定（オプション）

### 11. パフォーマンス最適化（オプション）
- [ ] Server Componentsの活用
- [ ] データキャッシング戦略
- [ ] 画像の遅延ロード
- [ ] ページネーションの最適化

### 12. セキュリティ（将来拡張）
- [ ] NextAuth.jsの導入
- [ ] 認証機能の実装
- [ ] ユーザー別データ管理
- [ ] API保護（認証必須化）

## 🔧 推奨学習順序

### フェーズ1: 基礎セットアップ
1. **shadcn/uiコンポーネントのインストール** (5.1) → UIライブラリの基本を学ぶ
2. **データベースセットアップ** (1) → Prismaの使い方を学ぶ
3. **Prismaクライアントのセットアップ** (2) → データベース接続を学ぶ

### フェーズ2: 簡単なCRUD実装（ブランド管理で学ぶ）
4. **ブランドAPI作成** (3.1) → Next.js API Routesを学ぶ
5. **ブランド管理ページのshadcn/ui置き換え** (5.7) → Table, Dialog, AlertDialogの使い方を学ぶ
6. **ブランド管理の機能実装** (4.7) → データフェッチング、CRUD操作を学ぶ

### フェーズ3: カテゴリ管理で復習
7. **カテゴリAPI作成** (3.2) → API作成の復習
8. **カテゴリ管理ページのshadcn/ui置き換え** (5.8) → UIコンポーネントの復習
9. **カテゴリ管理の機能実装** (4.8) → CRUD操作の復習

### フェーズ4: ルアー管理（メイン機能）
10. **ルアー登録・編集ページのshadcn/ui置き換え** (5.5) → Form, Select, Input等を学ぶ
11. **React Hook Form + Zodのセットアップ** (4.5) → フォーム管理を学ぶ
12. **ルアーAPI作成** (3.3) → 検索・フィルタ・ページネーション対応
13. **ルアー一覧ページのshadcn/ui置き換え** (5.3) → Card, Badge等を学ぶ
14. **ルアー一覧の機能実装** (4.3) → 検索・フィルタ・ページネーションを学ぶ
15. **ルアー詳細ページのshadcn/ui置き換え** (5.4) → AlertDialogを学ぶ
16. **ルアー詳細の機能実装** (4.4) → リレーションデータの表示を学ぶ

### フェーズ5: 釣果記録
17. **釣果記録API作成** (3.4) → リレーションの扱いを学ぶ
18. **釣果記録ページのshadcn/ui置き換え** (5.6) → Dialogでのフォーム実装を学ぶ
19. **釣果記録の機能実装** (4.6) → リレーションデータの登録を学ぶ

### フェーズ6: ダッシュボード
20. **ダッシュボードAPI作成** (3.5) → データ集計を学ぶ
21. **ダッシュボードのshadcn/ui置き換え** (5.2) → Card, Skeletonを学ぶ
22. **ダッシュボードの機能実装** (4.2) → チャート・統計情報を学ぶ

### フェーズ7: 画像・UI改善
23. **画像アップロード機能** (6) → Vercel Blobを学ぶ
24. **サイドバーのモバイル対応** (5.9) → Sheetコンポーネントを学ぶ
25. **エラーハンドリング・トースト通知** (7) → ユーザー体験向上を学ぶ
26. **レスポンシブデザインの調整** (8) → モバイル対応を学ぶ

### フェーズ8: デプロイ
27. **Vercelへのデプロイ** (10) → 本番環境での運用を学ぶ

## 📚 参考リソース

- [Next.js公式ドキュメント](https://nextjs.org/docs)
- [Prisma公式ドキュメント](https://www.prisma.io/docs)
- [shadcn/ui](https://ui.shadcn.com/)
- [React Hook Form](https://react-hook-form.com/)
- [Zod](https://zod.dev/)
- [Vercel Blob](https://vercel.com/docs/storage/vercel-blob)

## 💡 Tips

- 小さく始めて、少しずつ機能を追加していく
- 各機能を実装したら、動作確認を忘れずに
- エラーメッセージをよく読む（Next.jsは親切なエラーメッセージを出してくれる）
- Git でこまめにコミットする
- わからないことは公式ドキュメントを確認する
